import{r as d,a as f}from"./react.432bdd35.js";import{c as F}from"./react-dom.28efd146.js";import{H as Q}from"./react-router-dom.cb564caa.js";import{u as v,Q as P,a as R}from"./react-query.0e7bc109.js";import{c as z,j as e,a as l,T as O,C as W,F as p,b as k,B as T,d as j,e as _,f as H,g as q,I as V,h as U,P as G,S as h,i as K,k as C,l as S,m as x,u as I,n as N,o as J,p as X,A as Y,q as Z,r as D,s as ee,M as ne,t as B,R as te}from"./@mui.355f6495.js";import{E as oe}from"./react-error-boundary.7815bdff.js";import{c as re}from"./clsx.09c75e33.js";import{u as L,a as $,b as ie,c as a}from"./react-router.4fe7f937.js";import"./@babel.940d80f2.js";import"./scheduler.153b3889.js";import"./history.425c1f62.js";import"./react-is.8410b3df.js";import"./@emotion.3b18ba21.js";import"./hoist-non-react-statics.0f695828.js";import"./stylis.471761e6.js";import"./react-transition-group.9c900ba9.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const A=d.exports.createContext({toggleColorMode:()=>{}});function se({children:o}){const[t,n]=d.exports.useState("light"),r=d.exports.useMemo(()=>({toggleColorMode:()=>{n(s=>s==="light"?"dark":"light")}}),[]),i=d.exports.useMemo(()=>z({palette:{mode:t}}),[t]);return e(A.Provider,{value:r,children:l(O,{theme:i,children:[e(W,{}),o]})})}const le=(o,t)=>{},ue=({error:o,resetErrorBoundary:t})=>e(p,{children:"xxx"});function de({children:o}){return e(oe,{FallbackComponent:ue,onError:le,children:o})}function ae(){const o=L(),[t,n]=d.exports.useState("home"),r=[{label:"\u89D2\u8272",value:"characters",icon:e(_,{})},{label:"\u9996\u9875",value:"home",icon:e(H,{})},{label:"\u6B66\u5668",value:"weapons",icon:e(q,{})}];return d.exports.useEffect(()=>{o(`/${t}`)},[t]),e(k,{fixed:!0,maxWidth:"xs",sx:{position:"fixed",bottom:0,left:0,right:0},style:{padding:0},children:e(T,{value:t,onChange:(i,s)=>{n(s)},children:r.map(({value:i,icon:s,label:u})=>e(j,{label:u,value:i,icon:s},i))})})}const ce="https://api.minigg.cn/characters",b=async o=>(await fetch(`${ce}?query=${o}`)).json(),me=f.memo(function({name:t}){var u,m,c,g;const n=L(),{data:r,isLoading:i,isError:s}=v(["characters-list-item",t],()=>b(t));return e(V,{onClick:()=>n(`/character/${t}`,{state:{hiddenBottomNaviation:U}}),children:l(G,{elevation:10,style:{display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(250, 250, 250, 0.5)"},children:[!((u=r==null?void 0:r.images)!=null&&u.icon)&&e(h,{variant:"rectangular",width:85,height:85,animation:"wave"}),((m=r==null?void 0:r.images)==null?void 0:m.icon)&&e("img",{src:(c=r==null?void 0:r.images)==null?void 0:c.icon,srcSet:(g=r==null?void 0:r.images)==null?void 0:g.icon,alt:t,loading:"lazy",style:{width:"85px",height:"85px"}})]})})});function pe({dataSource:o,loading:t}){return t?e(p,{children:"Loading..."}):!t&&(!o||!(o instanceof Array))?e(p,{children:"\u65E0\u6570\u636E"}):e(K,{cols:4,children:o==null?void 0:o.map(n=>e(me,{name:n},n))})}const he=f.memo(pe),y=f.memo(function(t){const{children:n,value:r,index:i,...s}=t;return e("div",{role:"tabpanel",hidden:r!==i,id:`tabpanel-${i}`,className:"my-tab-panel",...s,children:r===i&&e(C,{sx:{p:3},children:n})})}),fe=f.memo(function({dataSource:t}){var s,u;const[n,r]=d.exports.useState(0);return l(p,{children:[e(C,{sx:{borderBottom:1,borderColor:"divider"},children:l(S,{value:n,onChange:(m,c)=>{r(c)},children:[e(x,{label:"\u5929\u8D4B\u547D\u5EA7"}),e(x,{label:"\u5347\u7EA7\u6750\u6599"}),e(x,{label:"\u7ACB\u7ED8\u56FE\u7247"}),e(x,{label:"\u8BE6\u7EC6\u4FE1\u606F"})]})}),e(y,{value:n,index:0,children:"Item One"}),e(y,{value:n,index:1,children:"Item Two"}),e(y,{value:n,index:2,children:e(C,{component:"img",sx:{width:"92vw",maxWidth:"390px"},alt:t==null?void 0:t.fullname,src:((s=t==null?void 0:t.images)==null?void 0:s.cover2)||((u=t==null?void 0:t.images)==null?void 0:u.card),style:{padding:0}})}),e(y,{value:n,index:3,children:"Item Two"})]})}),ge=d.exports.memo(function({children:t}){return e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:t})});function xe(){return e(T,{style:{background:"transparent"}})}function ye(){const o=I();return l("div",{children:[o.palette.mode," \u4E3B\u9898",e(N,{sx:{ml:1},color:"inherit",children:o.palette.mode==="dark"?e(J,{}):e(X,{})})]})}const ve=o=>{switch(o){case"home":return"\u9996\u9875";case"characters":return"\u89D2\u8272\u5217\u8868";case"weapons":return"\u6B66\u5668\u5217\u8868";case"weapon":return"";default:return"\u8FD4\u56DE"}};function Ce(){const{pathname:o}=$(),t=L(),n=d.exports.useMemo(()=>o.split("/")[1],[o]),[r,i]=f.useState(null),s=c=>{i(c.currentTarget)},u=()=>{i(null)};I();const m=f.useContext(A);return e(Y,{position:"static",color:"transparent",style:{boxShadow:"none"},children:l(Z,{variant:"dense",style:{padding:0},children:[l("div",{style:{flexGrow:1,display:"flex",alignItems:"center"},onClick:()=>t(-1),children:[o.split("/").length>=3&&e(D,{}),e("h3",{children:ve(decodeURI(n))})]}),l("div",{children:[e(N,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:s,color:"inherit",children:e(ee,{})}),l(ne,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(r),onClose:u,children:[e(B,{onClick:()=>{m.toggleColorMode(),u()},children:e(ye,{})}),e(B,{onClick:u,children:"My account"})]})]})]})})}function be({children:o}){var n,r;const t=I();return e(d.exports.Fragment,{children:l(k,{fixed:!0,maxWidth:"xs",className:re("main-content",((n=t==null?void 0:t.palette)==null?void 0:n.mode)==="dark"&&"background-dark-mode",((r=t==null?void 0:t.palette)==null?void 0:r.mode)==="light"&&"background-light-mode"),children:[e(Ce,{}),e("main",{children:o}),e(xe,{}),e(ae,{})]})})}function E(){return e("div",{children:"Home"})}function Ee(){const{data:o,isLoading:t,isError:n}=v(["character5starts"],()=>b("5")),{data:r,isLoading:i,isError:s}=v(["character4starts"],()=>b("4")),u=d.exports.useMemo(()=>r instanceof Array&&o instanceof Array?[...o,...r]:[],[o,r]);return e("div",{children:e(he,{dataSource:u,loading:t&&i})})}function Ie(){var m;const{pathname:o}=$(),t=d.exports.useMemo(()=>o.split("/")[o.split("/").length-1],[o]),{data:n,isLoading:r,isError:i}=v(["character",t],()=>b(t));d.exports.useEffect(()=>{if(i)throw new Error("\u8BF7\u6C42\u51FA\u9519\u4E86")},[i]),console.log(n);const s=d.exports.useMemo(()=>l("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[!(n!=null&&n.fullname)&&l(p,{children:[e(h,{variant:"text",width:100}),e(h,{variant:"text",width:100,sx:{fontSize:"24px"}})]}),(n==null?void 0:n.fullname)&&l(p,{children:[e("span",{children:n==null?void 0:n.title}),e("div",{style:{fontSize:"24px"},children:n==null?void 0:n.fullname})]}),l("div",{children:[!(n!=null&&n.description)&&l(p,{children:[e(h,{variant:"text",sx:{fontSize:"0.8rem"}}),e(h,{variant:"text",sx:{fontSize:"0.8rem"}}),e(h,{variant:"text",sx:{fontSize:"0.8rem"}})]}),(n==null?void 0:n.description)&&e("span",{style:{fontSize:"0.8rem"},children:n==null?void 0:n.description})]})]}),[n==null?void 0:n.title,n==null?void 0:n.fullname,n==null?void 0:n.description]),u=d.exports.useMemo(()=>{var c,g,w;return l("div",{style:{padding:10},children:[!((c=n==null?void 0:n.images)!=null&&c.icon)&&e(h,{variant:"rounded",width:120,height:120}),((g=n==null?void 0:n.images)==null?void 0:g.icon)&&l("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e(C,{component:"img",sx:{width:"120px",height:"120px"},alt:n==null?void 0:n.fullname,src:(w=n==null?void 0:n.images)==null?void 0:w.icon}),e(te,{defaultValue:Number(n==null?void 0:n.rarity),max:Number(n==null?void 0:n.rarity),readOnly:!0})]})]})},[(m=n==null?void 0:n.images)==null?void 0:m.icon,n==null?void 0:n.rarity,n==null?void 0:n.fullname]);return l(p,{children:[l(ge,{children:[s,u]}),e(fe,{dataSource:n})]})}function Le(){return e("div",{children:"Weapon List"})}function we(){return e("div",{children:"Weapon Detail"})}function M(){return e("div",{children:"404"})}function Be(){return e("div",{children:"ServerError"})}function Me(){return l(ie,{children:[e(a,{path:"/",element:e(E,{})}),e(a,{path:"/index",element:e(E,{})}),e(a,{path:"/home",element:e(E,{})}),e(a,{path:"/characters",element:e(Ee,{})}),e(a,{path:"/character/:name",element:e(Ie,{})}),e(a,{path:"/weapons",element:e(Le,{})}),e(a,{path:"/weapon/:name",element:e(we,{})}),e(a,{path:"/404",element:e(M,{})}),e(a,{path:"/500",element:e(Be,{})}),e(a,{path:"/*",element:e(M,{})})]})}function ke(){return e(be,{children:e(Me,{})})}const Te=new P;F.createRoot(document.getElementById("root")).render(e(f.StrictMode,{children:e(Q,{children:e(de,{children:e(R,{client:Te,children:e(se,{children:e(ke,{})})})})})}));
